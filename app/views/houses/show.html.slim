- content_for(:html_title) {"家(#{@house.name})の中 | MemoBuilder"}
.row.houses
	.col-sm-3
		.sidebar
			= render 'users/profile', user: @user

	.col-sm-9.
		== render 'layouts/breadcrumbs', model: @house
		.form-row.my-2
			.col = link_to edit_house_path(@house), class: "btn btn-info btn-block" do
				i.fas.fa-hammer
				|  家のリフォーム
			.col
				= form_with model: [current_user, Room.new], local: true do |f|
					= f.hidden_field :house_id, value: @house.id
					.input-group
						= f.text_field :name, placeholder: "新しい部屋の名前", class: "form-control"
						.input-group-append
							=f.button "作成", type: "submit", class: "btn btn-primary"

		.rooms
			== render 'layouts/sort_search_bar', base:@rooms,ransack: @r
			.list_title
				h4 部屋一覧
			.rooms_list
				- if @rooms.present?
					- @rooms.each do |room|
						.media
							.media_body
								= link_to room.name, room_path(room),class: "media_body-title"
								.meta
									p メモ数 (#{room.memos.size})
									p = "#{room.updated_at.strftime('%Y/%m/%d')} 更新"
				- else
					nothing
						- if params[:q].present?
							h5 見つかりませんでした
							= link_to "<< 戻る", :back, class: "links"

						- else
							h5 部屋はありません
		.memos
			== render 'layouts/sort_search_bar', base:@memos,ransack: @q
			.list_title
				h4 #{@house.name} 内の投稿一覧
			.memos_list
				== render 'memos/memos_list', memos: @memos
